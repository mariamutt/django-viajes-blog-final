{% extends 'base.html' %}
{% load static %}

{% block title %}Posts de {{ target_user.username }}{% endblock %}

{% block content %}
<div class="container my-5">
    
    <!-- Encabezado del Perfil -->
    <header class="text-center mb-5 p-4 bg-light rounded-4 shadow-sm">
        <h1 class="display-4 fw-bold text-primary">
            Aventuras de {{ target_user.username }}
        </h1>
        <p class="lead text-muted mt-3">
            Explorando las crónicas de viaje de este autor.
        </p>
        
        <!-- Enlace para ver el perfil completo (Requiere la app 'profiles') -->
        {% if target_user.id %}
            <a href="{% url 'profiles:detail' user_id=target_user.id %}" class="btn btn-outline-primary btn-sm mt-2">
                Ver Perfil Completo <i class="fas fa-user-circle ms-1"></i>
            </a>
        {% endif %}
    </header>

    <!-- Sección de Posts -->
    {% if posts %}
        <div class="row g-4">
            {% for post in posts %}
            <div class="col-md-6 col-lg-4 d-flex">
                <div class="card h-100 shadow-sm border-0 rounded-3 overflow-hidden transition-hover">
                    {% if post.image %}
                    <img src="{{ post.image.url }}" class="card-img-top object-fit-cover" alt="Imagen de {{ post.title }}" style="height: 200px;">
                    {% else %}
                    <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height: 200px;">
                        <i class="fas fa-image fa-3x"></i>
                    </div>
                    {% endif %}
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title fw-bold text-truncate">{{ post.title }}</h5>
                        <p class="card-subtitle mb-2 text-muted small">
                            <i class="fas fa-map-marker-alt me-1"></i> {{ post.location }}
                        </p>
                        <p class="card-text flex-grow-1">{{ post.content|truncatechars:100 }}</p>
                    </div>
                    <div class="card-footer bg-white border-top-0 pt-0">
                        <a href="{% url 'travels:detail' slug=post.slug %}" class="btn btn-primary btn-sm d-block">
                            Leer Aventura Completa
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <!-- Mensaje si no hay posts -->
        <div class="alert alert-info text-center mt-5 p-4 rounded-4">
            <h4 class="alert-heading">¡Aún no hay posts!</h4>
            <p>Parece que **{{ target_user.username }}** todavía no ha compartido ninguna aventura de viaje.</p>
        </div>
    {% endif %}
    
</div>

<style>
    /* Estilo para una transición suave al pasar el ratón */
    .transition-hover {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .transition-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    }
    .object-fit-cover {
        object-fit: cover;
    }
</style>
{% endblock %}